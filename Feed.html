<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Feed ‚Äî Darlon Index</title>
  <style>
    body {
      font-family: "Inter", sans-serif;
      background-color: #000;
      color: #fff;
      margin: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      min-height: 100vh;
    }

    header {
      background-color: #111;
      width: 100%;
      padding: 15px;
      text-align: center;
      font-size: 1.5rem;
      font-weight: bold;
      border-bottom: 1px solid #222;
      position: sticky;
      top: 0;
      z-index: 10;
    }

    .post-form {
      margin: 20px;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 10px;
      width: 90%;
      max-width: 500px;
    }

    .post-form input, .post-form textarea {
      width: 100%;
      padding: 10px;
      border: none;
      border-radius: 8px;
      font-size: 1rem;
      background-color: #111;
      color: #fff;
    }

    .post-form button {
      background-color: #00bfff;
      color: #000;
      border: none;
      border-radius: 8px;
      padding: 10px 20px;
      cursor: pointer;
      font-weight: bold;
      transition: background 0.3s;
    }

    .post-form button:hover {
      background-color: #00a0d1;
    }

    .feed {
      display: flex;
      flex-direction: column;
      align-items: center;
      width: 100%;
      max-width: 600px;
      gap: 20px;
      margin-bottom: 40px;
    }

    .post {
      background-color: #111;
      border-radius: 10px;
      width: 90%;
      max-width: 500px;
      overflow: hidden;
      box-shadow: 0 0 10px rgba(255, 255, 255, 0.05);
    }

    .post img {
      width: 100%;
      display: block;
    }

    .post-header {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 10px 15px;
      border-bottom: 1px solid #222;
    }

    .avatar {
      width: 35px;
      height: 35px;
      border-radius: 50%;
      background-color: #333;
    }

    .username {
      font-weight: bold;
      font-size: 1rem;
    }

    .caption {
      padding: 10px 15px;
      font-size: 1rem;
    }

    .actions {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 0 15px 10px 15px;
    }

    .like-btn {
      background: none;
      border: none;
      cursor: pointer;
      color: #fff;
      font-size: 1.2rem;
      transition: transform 0.2s;
    }

    .like-btn:hover {
      transform: scale(1.2);
    }

    .comments {
      padding: 10px 15px;
      border-top: 1px solid #222;
    }

    .comments p {
      margin: 5px 0;
      color: #ccc;
      font-size: 0.9rem;
    }

    .comment-form {
      display: flex;
      gap: 5px;
      margin-top: 10px;
    }

    .comment-form input {
      flex: 1;
      padding: 8px;
      border-radius: 5px;
      border: none;
      background-color: #222;
      color: #fff;
    }

    .comment-form button {
      background-color: #00bfff;
      border: none;
      color: #000;
      padding: 8px 12px;
      border-radius: 5px;
      cursor: pointer;
      font-weight: bold;
    }
  </style>
</head>
<body>
  <header>üì∏ Feed Darlon Index</header>

  <div class="post-form">
    <input type="text" id="username" placeholder="Seu nome de usu√°rio..." />
    <input type="file" id="imageFile" accept="image/*" />
    <textarea id="caption" placeholder="Escreva uma legenda..." rows="2"></textarea>
    <button id="addPost">Publicar</button>
  </div>

  <div class="feed" id="feed"></div>

  <script>
    const feed = document.getElementById("feed");
    const username = document.getElementById("username");
    const imageFile = document.getElementById("imageFile");
    const caption = document.getElementById("caption");
    const addPostBtn = document.getElementById("addPost");

    let posts = JSON.parse(localStorage.getItem("posts_v2")) || [];

    function savePosts() {
      localStorage.setItem("posts_v2", JSON.stringify(posts));
    }

    function renderPosts() {
      feed.innerHTML = "";
      posts.forEach((post, index) => {
        const postDiv = document.createElement("div");
        postDiv.className = "post";
        postDiv.innerHTML = `
          <div class="post-header">
            <div class="avatar"></div>
            <div class="username">${post.username}</div>
          </div>
          <img src="${post.image}" alt="Post">
          <div class="actions">
            <button class="like-btn" onclick="toggleLike(${index})">
              ${post.liked ? "‚ù§Ô∏è" : "ü§ç"}
            </button>
            <span>${post.likes} curtidas</span>
          </div>
          <div class="caption">${post.caption}</div>
          <div class="comments" id="comments-${index}">
            ${post.comments.map(c => `<p><strong>${c.user}:</strong> ${c.text}</p>`).join("")}
            <form class="comment-form" onsubmit="addComment(event, ${index})">
              <input type="text" placeholder="Adicione um coment√°rio..." required />
              <button type="submit">üí¨</button>
            </form>
          </div>
        `;
        feed.appendChild(postDiv);
      });
    }

    function addPost() {
      if (!username.value.trim() || !caption.value.trim() || !imageFile.files[0]) {
        return alert("Preencha todos os campos e adicione uma imagem!");
      }

      const reader = new FileReader();
      reader.onload = () => {
        const newPost = {
          username: username.value,
          image: reader.result,
          caption: caption.value,
          comments: [],
          likes: 0,
          liked: false
        };
        posts.unshift(newPost);
        savePosts();
        renderPosts();
        imageFile.value = "";
        caption.value = "";
      };
      reader.readAsDataURL(imageFile.files[0]);
    }

    function toggleLike(index) {
      posts[index].liked = !posts[index].liked;
      posts[index].likes += posts[index].liked ? 1 : -1;
      savePosts();
      renderPosts();
    }

    function addComment(event, index) {
      event.preventDefault();
      const input = event.target.querySelector("input");
      const text = input.value.trim();
      if (!text) return;
      posts[index].comments.push({ user: "An√¥nimo", text });
      savePosts();
      renderPosts();
    }

    addPostBtn.addEventListener("click", addPost);
    renderPosts();
  </script>
</body>
</html>
