<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Feed ‚Äî Espa√ßo MAKER</title>
  <style>
    body {
      font-family: "Inter", sans-serif;
      background-color: #000;
      color: #fff;
      margin: 0;
      padding: 0;
    }

    /* Cabe√ßalho */
    header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 10px 20px;
      background-color: #111;
      border-bottom: 1px solid #222;
    }

    header h1 {
      margin: 0;
      font-size: 1.8rem;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .header-icons {
      display: flex;
      gap: 15px;
    }

    .icon-btn {
      font-size: 1.5rem;
      cursor: pointer;
      padding: 8px;
      border-radius: 8px;
      border: 2px solid transparent;
      transition: all 0.3s ease;
      color: #00bfff;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .icon-btn:hover {
      border: 2px solid #00ffff;
    }

    /* Formul√°rio de postagem */
    .post-form {
      display: none;
      flex-direction: column;
      gap: 10px;
      padding: 15px;
      max-width: 500px;
      margin: 20px auto;
      background-color: #111;
      border: 1px solid #222;
      border-radius: 10px;
    }

    .post-form input,
    .post-form textarea,
    .post-form button {
      width: 100%;
      padding: 8px;
      border-radius: 6px;
      border: 1px solid #222;
      background-color: #000;
      color: #fff;
    }

    .post-form button {
      border: 2px solid #00bfff;
      cursor: pointer;
      transition: background 0.3s, color 0.3s;
    }

    .post-form button:hover {
      background-color: #00bfff;
      color: #000;
    }

    /* Feed de posts */
    .feed-posts {
      max-width: 600px;
      margin: 20px auto;
      display: flex;
      flex-direction: column;
      gap: 20px;
    }

    .post {
      padding: 10px;
      background-color: #111;
      border: 1px solid #222;
      border-radius: 10px;
    }

    .post img {
      max-width: 100%;
      border-radius: 8px;
      margin-top: 10px;
    }

    .post-actions {
      display: flex;
      align-items: center;
      gap: 15px;
      margin-top: 10px;
    }

    .action-btn {
      cursor: pointer;
      padding: 5px 10px;
      border-radius: 8px;
      border: 1px solid #00bfff;
      background-color: #000;
      color: #00bfff;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      gap: 5px;
    }

    .action-btn:hover {
      background-color: #00bfff;
      color: #000;
    }

    /* Coment√°rios */
    .comment-section {
      display: none;
      flex-direction: column;
      gap: 10px;
      margin-top: 10px;
    }

    .comment {
      background-color: #111;
      border: 1px solid #222;
      border-radius: 8px;
      padding: 8px;
      cursor: pointer;
      transition: background 0.3s;
    }

    .comment:hover {
      background-color: #0a0a0a;
    }

    .comment .comment-header {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 5px;
    }

    .comment .avatar {
      width: 30px;
      height: 30px;
      border-radius: 50%;
      background-color: #00bfff33;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.2rem;
    }

    .comment-actions {
      display: flex;
      gap: 10px;
      margin-top: 5px;
    }

    .reply-box {
      display: none;
      margin-top: 5px;
    }

    .reply-box input {
      width: 100%;
      padding: 6px;
      border-radius: 6px;
      border: 1px solid #222;
      background-color: #000;
      color: #fff;
      margin-bottom: 5px;
    }

    .reply-box button {
      border: 1px solid #00bfff;
      background-color: #000;
      color: #00bfff;
      border-radius: 6px;
      padding: 4px 8px;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .reply-box button:hover {
      background-color: #00bfff;
      color: #000;
    }

    .nested-comments {
      display: none;
      margin-left: 30px;
      margin-top: 5px;
      flex-direction: column;
      gap: 5px;
    }
  </style>
</head>
<body>
  <header>
    <h1>Feed üì∑</h1>
    <div class="header-icons">
      <div class="icon-btn" id="homeBtn" title="Home">üè†</div>
      <div class="icon-btn" id="addPhotoBtn" title="Adicionar Foto">‚ûï</div>
    </div>
  </header>

  <div class="post-form" id="postForm">
    <input type="text" id="username" placeholder="Seu nome de usu√°rio..." />
    <input type="file" id="imageFile" accept="image/*" />
    <textarea id="caption" placeholder="Escreva uma legenda..." rows="2"></textarea>
    <button id="addPost">Publicar</button>
  </div>

  <div class="feed-posts" id="feedPosts"></div>

  <script>
    const homeBtn = document.getElementById('homeBtn');
    const addPhotoBtn = document.getElementById('addPhotoBtn');
    const postForm = document.getElementById('postForm');
    const addPostBtn = document.getElementById('addPost');
    const feedPosts = document.getElementById('feedPosts');

    homeBtn.addEventListener('click', () => (window.location.href = 'home.html'));

    addPhotoBtn.addEventListener('click', () => {
      postForm.style.display = postForm.style.display === 'flex' ? 'none' : 'flex';
    });

    // Fun√ß√£o para criar coment√°rio
    function createComment(username, text, isReply = false) {
      const commentDiv = document.createElement('div');
      commentDiv.className = 'comment';
      commentDiv.innerHTML = `
        <div class="comment-header">
          <div class="avatar">üë§</div>
          <strong>${username}</strong>
        </div>
        <p>${text}</p>
        <div class="comment-actions">
          <div class="action-btn like-btn">‚ù§Ô∏è <span class="like-count">0</span></div>
          <div class="action-btn reply-btn">üí¨ Responder</div>
        </div>
        <div class="reply-box">
          <input type="text" placeholder="Escreva uma resposta..." />
          <button>Enviar</button>
        </div>
        <div class="nested-comments"></div>
      `;

      // Like handler
      const likeBtn = commentDiv.querySelector('.like-btn');
      const likeCount = commentDiv.querySelector('.like-count');
      let liked = false;
      likeBtn.addEventListener('click', (e) => {
        e.stopPropagation();
        if (!liked) {
          liked = true;
          likeCount.textContent = parseInt(likeCount.textContent) + 1;
        }
      });

      // Reply toggle
      const replyBtn = commentDiv.querySelector('.reply-btn');
      const replyBox = commentDiv.querySelector('.reply-box');
      const nested = commentDiv.querySelector('.nested-comments');
      replyBtn.addEventListener('click', (e) => {
        e.stopPropagation();
        replyBox.style.display = replyBox.style.display === 'flex' ? 'none' : 'flex';
      });

      // Enviar resposta
      const replyInput = replyBox.querySelector('input');
      const replySend = replyBox.querySelector('button');
      replySend.addEventListener('click', (e) => {
        e.stopPropagation();
        const replyText = replyInput.value.trim();
        if (!replyText) return;
        nested.appendChild(createComment("An√¥nimo", replyText, true));
        replyInput.value = '';
        nested.style.display = 'flex';
      });

      // Mostrar/ocultar respostas
      commentDiv.addEventListener('click', (e) => {
        if (e.target.closest('.comment-actions') || e.target.closest('.reply-box')) return;
        nested.style.display = nested.style.display === 'flex' ? 'none' : 'flex';
      });

      return commentDiv;
    }

    // Adicionar post
    addPostBtn.addEventListener('click', () => {
      const username = document.getElementById('username').value.trim();
      const caption = document.getElementById('caption').value.trim();
      const imageFile = document.getElementById('imageFile').files[0];
      if (!username || !caption || !imageFile) {
        alert('Preencha todos os campos antes de publicar!');
        return;
      }

      const reader = new FileReader();
      reader.onload = function(e) {
        const postDiv = document.createElement('div');
        postDiv.className = 'post';
        postDiv.innerHTML = `
          <strong>${username}</strong>
          <img src="${e.target.result}" alt="Imagem postada">
          <p>${caption}</p>
          <div class="post-actions">
            <div class="action-btn like-btn">‚ù§Ô∏è <span class="like-count">0</span></div>
            <div class="action-btn comment-btn">üí¨ <span class="comment-count">0</span></div>
          </div>
          <div class="comment-section">
            <input type="text" placeholder="Escreva um coment√°rio..." />
            <button>Comentar</button>
            <div class="comments-list"></div>
          </div>
        `;

        const likeBtn = postDiv.querySelector('.like-btn');
        const commentBtn = postDiv.querySelector('.comment-btn');
        const commentSection = postDiv.querySelector('.comment-section');
        const commentInput = commentSection.querySelector('input');
        const commentSend = commentSection.querySelector('button');
        const commentsList = commentSection.querySelector('.comments-list');
        const commentCount = postDiv.querySelector('.comment-count');
        let liked = false;

        likeBtn.addEventListener('click', () => {
          if (!liked) {
            liked = true;
            likeBtn.querySelector('.like-count').textContent =
              parseInt(likeBtn.querySelector('.like-count').textContent) + 1;
          }
        });

        commentBtn.addEventListener('click', () => {
          commentSection.style.display = commentSection.style.display === 'flex' ? 'none' : 'flex';
        });

        commentSend.addEventListener('click', () => {
          const text = commentInput.value.trim();
          if (!text) return;
          commentsList.appendChild(createComment(username, text));
          commentInput.value = '';
          commentCount.textContent = commentsList.children.length;
        });

        feedPosts.prepend(postDiv);
        document.getElementById('username').value = '';
        document.getElementById('caption').value = '';
        document.getElementById('imageFile').value = '';
        postForm.style.display = 'none';
      };
      reader.readAsDataURL(imageFile);
    });
  </script>
</body>
</html>
